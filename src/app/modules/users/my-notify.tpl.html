<form name="userForm" ng-submit="saveNotifications()" id="userForm">

    <nav class="navbar navbar-fixed-top" id="preslog_sub_nav">
        <div class="navbar-inner">
            <div class="container-fluid">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".navbar-responsive-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>

                <h2>My Notifications</h2>

                <div class="nav-collapse collapse navbar-responsive-collapse">
                    <ul class="nav pull-right">
                        <li>
                            <button type="submit" name="submitButton" class="btn btn-success" ng-disabled="userForm.$invalid"><i class="icon icon-ok"></i> Save Changes</button>
                        </li>
                    </ul>
                </div><!-- /.nav-collapse -->
            </div>
        </div><!-- /navbar-inner -->
    </nav>

    <div class="container-fluid" id="preslog_my_notify">

        <div class="alert alert-error" ng-show="validation.notifications" ng-bind="validation.notifications"></div>

        <!-- About Me -->
        <div class="row-fluid user-details">
            <div class="span12 form-horizontal">
                <p>Select the types of instant notifications you wish to receive.<br/>The Email Address and Phone Number used for these notifications can be modified from the <a href="/my-profile">My Profile</a> page.</p>
                <div class="control-group">
                    <label class="control-label" for="inputNotifyEmail">Email Notifications</label>
                    <div class="controls">
                        <input type="checkbox"
                               id="inputNotifyEmail"
                               ng-model="user.notifications.types.email" />
                    </div>
                </div>
                <div class="control-group">
                    <label class="control-label" for="inputNotifyPhone">SMS Notifications</label>
                    <div class="controls">
                        <input type="checkbox"
                               id="inputNotifyPhone"
                               ng-model="user.notifications.types.phone"
                               tooltip-placement="right"
                               tooltip="SMS Notifications can issued for high severity events." />
                    </div>
                </div>
                <div class="control-group">
                    <div class="controls">
                        <button type="submit" name="submitButton" class="btn btn-success" ng-disabled="userForm.$invalid"><i class="icon icon-ok"></i> Save Changes</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="alert alert-info">
            <strong>Note:</strong> The notification criteria is inclusive; you will receive alerts for logs that match ANY of the items selected in the criteria below.
            <br/>For instance, selecting <strong>"NSW" <u>and</u> "VIC"</strong> would result in an alert being sent for any log that affects <strong>"NSW" <u>or</u> "VIC"</strong>.
        </div>

        <!-- Client One -->
        <div class="row-fluid" ng-repeat="client in options.notifications.clients">
            <div class="span12">
                <h2>{{client.name}}</h2>
                <div class="row-fluid">
                    <div class="span4">
                        <p>Send alerts for logs which are..</p>
                        <div class="control-group">
                            <div class="controls">
                                <label class="checkbox" ng-repeat="severity in client.severities">
                                    <input type="checkbox" ng-model="user.notifications.clients[client.id].severity[severity.id]"> {{severity.name}}
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="span8">
                        <div ng-repeat="group in client.attributes" id="hf2">
                            <div class="row-fluid">
                                <div class="span12">
                                    <legend>{{ group.name }}</legend>
                                </div>
                            </div>
                            <div class="row-fluid">
                                <div class="span6" ng-repeat="child in group.children">
                                    <span hierarchy-fields="{{child}}" hierarchy-selected="{{user.notifications.clients[client.id].attributes}}"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>


        <div class="row-fluid">
            <div class="offset1 span11">

                <!-- Save -->
                <div class="control-group">
                    <div class="controls">
                        <button type="submit" class="btn btn-success" ng-disabled="userForm.$invalid"><i class="icon icon-ok"></i> Save Changes</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</form>